<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmarTest - Generator ÃntrebÄƒri AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ SmarTest</h1>
            <p>Generator ÃntrebÄƒri pentru Probleme de CÄƒutare AI</p>
        </div>

        <div class="content">
            <div id="screen-home">
                <h2>Bine ai venit!</h2>
                <div class="menu-grid">
                    <div class="menu-card" onclick="showGenerate()">
                        <h3>â• GenereazÄƒ</h3>
                        <p>CreeazÄƒ Ã®ntrebÄƒri noi</p>
                    </div>
                    <div class="menu-card" onclick="showQuestions()">
                        <h3>ğŸ“š ÃntrebÄƒri</h3>
                        <p><span id="count">0</span> generate</p>
                    </div>
                    <div class="menu-card" onclick="showAnswer()">
                        <h3>âœï¸ RÄƒspunde</h3>
                        <p>TesteazÄƒ-È›i cunoÈ™tinÈ›ele (individual)</p>
                    </div>
                    <div class="menu-card" onclick="showTestConfig()">
                        <h3>ğŸ“ Test Nou</h3>
                        <p>GenereazÄƒ È™i rezolvÄƒ un test</p>
                    </div>
                </div>
            </div>

            <div id="screen-generate" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ AcasÄƒ</button>
                <h2>GenereazÄƒ ÃntrebÄƒri</h2>
                <p>Alege tipul È™i numÄƒrul de Ã®ntrebÄƒri unice de generat:</p>
                <form id="generate-form">
                    <div class="form-group">
                        <label for="question-type">Tip Ãntrebare:</label>
                        <select id="question-type" class="form-control">
                            <option value="random">Aleatoriu</option>
                            <option value="n-queens">N-Queens</option>
                            <option value="hanoi">Turnurile din Hanoi</option>
                            <option value="coloring">Colorare Graf</option>
                            <option value="knight">Knight's Tour</option>
                            <option value="nash">Nash Equilibrium</option>  <!-- ADAUGÄ‚ ACEASTA -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="question-count">NumÄƒr de Ã®ntrebÄƒri (max 20):</label>
                        <input type="number" id="question-count" class="form-control" value="5" min="1" max="20">
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button type="button" class="btn btn-primary" onclick="generateBatch()">ğŸš€ GenereazÄƒ È™i SalveazÄƒ</button>
                    </div>
                </form>
                <div id="generation-status" style="margin-top: 20px; text-align: center;"></div>
            </div>

            <div id="screen-questions" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ AcasÄƒ</button>
                <h2>Lista ÃntrebÄƒri (<span id="total">0</span>)</h2>
                <div style="text-align: right; margin-bottom: 20px;">
                    <button class="btn btn-info" onclick="downloadPDF()">â¬‡ï¸ DescarcÄƒ PDF</button>
                    <button class="btn btn-danger" onclick="confirmClearAll()">âš ï¸ È˜terge Tot</button>
                </div>
                <div id="questions-list">
                </div>
            </div>

            <div id="screen-detail" class="hidden">
                <button class="btn btn-secondary" onclick="showQuestions()">â¬…ï¸ Ãnapoi la ListÄƒ</button>
                <h2 id="detail-title"></h2>
                <div class="question-box" id="detail-question"></div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-danger" id="delete-q-btn" onclick="confirmDeleteQuestion()">âŒ È˜terge</button>
                </div>
            </div>

            <div id="screen-answer" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ Ãnapoi</button>
                <h2 id="answer-title"></h2>
                <div class="question-box" id="answer-question"></div>
                <textarea id="user-answer" placeholder="Scrie rÄƒspunsul tÄƒu aici..."></textarea>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="submitAnswer()">âœ… EvalueazÄƒ</button>
                </div>
            </div>

            <div id="screen-nash-answer" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ Inapoi</button>
                <h2 id="nash-answer-title">Nash Equilibrium</h2>
                
                <!-- Ãntrebarea cu tabelul -->
                <div class="question-box" id="nash-answer-question" style="white-space: pre-wrap;"></div>
                
                <!-- OpÈ›iune: NU EXISTÄ‚ Nash -->
                <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #ffc107;">
                    <label style="display: flex; align-items: center; cursor: pointer; font-size: 1.1em;">
                        <input type="checkbox" id="nash-no-equilibrium" style="width: 25px; height: 25px; margin-right: 15px; cursor: pointer;" onchange="handleNoNashCheckbox()">
                        <strong>Nu existÄƒ echilibru Nash pur</strong>
                    </label>
                </div>
                
                <!-- SAU selecteazÄƒ celulele Nash -->
                <div style="background: #d4edda; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px solid #28a745;">
                    <h3 style="margin-bottom: 15px; color: #155724;">SAU selecteazÄƒ celulele Nash:</h3>
                    <div id="nash-cells-container">
                        <!-- Checkboxurile se vor genera aici dinamic -->
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-success" onclick="submitNashAnswer()">âœ… EvalueazÄƒ</button>
                </div>
            </div>

            <div id="screen-eval" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ AcasÄƒ</button>
                <h2>Evaluare</h2>
                <div class="question-box">
                    <strong>Ãntrebarea iniÈ›ialÄƒ:</strong>
                    <div id="eval-question-text" style="margin-top: 10px; font-style: italic;"></div>
                </div>

                <div class="question-box" style="background: #e6f7e8; border: 1px solid #c3e6cb;">
                    <strong>RÄƒspunsul tÄƒu:</strong>
                    <pre id="eval-user-answer-display" style="white-space: pre-wrap; margin-top: 10px; font-style: italic;"></pre>
                </div>
                <div id="score-display"></div>
                <div class="question-box" style="background: #e7f3ff;">
                    <strong>RÄƒspuns corect:</strong>
                    <div id="eval-correct"></div>
                </div>
                <div class="question-box" style="background: #f3e5f5;">
                    <strong>ExplicaÈ›ie:</strong>
                    <div id="eval-explanation"></div>
                </div>
            </div>

            <div id="screen-test-config" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ AcasÄƒ</button>
                <h2>Configurare Test</h2>
                <p>Alege numÄƒrul de Ã®ntrebÄƒri pentru fiecare tip. (Total Ã®ntrebÄƒri disponibile: <span id="total-q-config">0</span>)</p>
                <form id="test-config-form" class="form-grid" style="margin-top: 20px;">
                </form>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" onclick="generateTest()">ğŸš€ Start Test</button>
                </div>
            </div>

            <div id="screen-test-quiz" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">âŒ AnuleazÄƒ Test</button>
                <h2 id="test-quiz-title">Test Ã®n derulare</h2>
                <div style="text-align: center; margin-bottom: 20px; font-size: 1.2em; color: #667eea;">
                    <strong>Ãntrebarea <span id="current-q-index">1</span> din <span id="total-q-test">10</span></strong>
                </div>
                <div class="question-box" id="test-quiz-question-container">
                    <h3 id="test-q-title"></h3>
                    <p id="test-q-text" style="white-space: pre-wrap; margin-top: 15px;"></p>
                    
                    <div id="test-answer-container" style="margin-top: 20px;">
                        </div>
                </div>
                <div style="text-align: right; margin-top: 20px;">
                    <button class="btn btn-info" id="prev-q-btn" onclick="navigateTest(-1)" disabled>â¬…ï¸ Ãnapoi</button>
                    <button class="btn btn-primary" id="next-q-btn" onclick="navigateTest(1)">UrmÄƒtoarea â¡ï¸</button>
                    <button class="btn btn-success hidden" id="finish-test-btn" onclick="submitTest()">âœ… FinalizeazÄƒ Test</button>
                </div>
            </div>

            <div id="screen-test-results" class="hidden">
                <button class="btn btn-secondary" onclick="showHome()">â¬…ï¸ AcasÄƒ</button>
                <h2>Rezultate Test</h2>
                <div id="test-global-score" class="score-box" style="margin-bottom: 30px;"></div>

                <div id="test-results-list">
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>